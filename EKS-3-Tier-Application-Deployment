Prerequisites:***
--------------
1) Ubuntu 24.04 LTS - t3a.small (2GB RAM, 2vCore, 15GB EBS)
2) Create IAM User with access & secret key
3) Install docker & give user permission
4) Install aws CLI
5) Install Kubectl & eksctl
    

STEPS:--
-------
Install docker & give user permission
    sudo apt-get update
    sudo apt-get install docker.io
    sudo chown $USER /var/run/docker.sock
    docker ps

cd /home/ubuntu/
git clone https://github.com/myktiwari/TWSThreeTierAppChallenge.git

Project Folder
---------------
cd TWSThreeTierAppChallenge/
Application-Code  Jenkins-Pipeline-Code  Jenkins-Server-TF  Kubernetes-Manifests-file  README.md  assets

Write the Dockerfile for frontend & backend application & create image from it.
-------------------------------------------------------------------------------
cd Application-Code/frontend/
vim Dockerfile
  FROM node:14                      //pick the stable version
  WORKDIR /usr/src/app
  COPY package*.json ./
  RUN npm install
  COPY . .
  CMD [ "npm", "start" ]

docker build -t  three-tier-frontend .     // create the docker image of frontend app
docker run -itd --name frontend-app -p 3000:3000 three-tier-frontend:latest       // (Optional) test the application created from image on browser <ip>:3000

cd Application-Code/backend/
vim Dockerfile
    FROM node:14
    WORKDIR /usr/src/app
    COPY package*.json ./
    RUN npm install
    COPY . .
    CMD ["node", "index.js"]

docker build -t three-tier-backend .     // // create the docker image of backend app

Install AWS CLI & configure for access & secret key***
    curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
    sudo apt install unzip
    unzip awscliv2.zip
    sudo ./aws/install -i /usr/local/aws-cli -b /usr/local/bin --update
    aws configure

Push the frontend & backend images on AWS ECR (Elastic Container Registry)
--------------------------------------------------------------------------
Amazon ECR --> Private registry --> Repositories --> Create repositories --> 
three-tier-frontend --> View push commands --> (follow the instructions for token & authentication)
--> run the given command on server

Amazon ECR --> Private registry --> Repositories --> Create repositories --> 
three-tier-backend --> View push commands --> (follow the instructions for token & authentication)
--> run the given command on server

Install Kubectl & eksctl***
    curl -o kubectl https://amazon-eks.s3.us-west-2.amazonaws.com/1.19.6/2021-01-05/bin/linux/amd64/kubectl
    chmod +x ./kubectl
    sudo mv ./kubectl /usr/local/bin
    kubectl version --short --client
    ---
    curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp
    sudo mv /tmp/eksctl /usr/local/bin
    eksctl version



